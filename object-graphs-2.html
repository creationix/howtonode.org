<!DOCTYPE html>
<html lang="en">
<!-- Mirrored from localhost:8080/object-graphs-2 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 13 Jul 2021 13:57:45 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta charset="utf-8" /><title>Learning Javascript with Object Graphs (Part II) - How To Node - NodeJS</title><meta name="description" content="Learn the zen of coding in NodeJS." /><meta name="viewport" content="width=device-width" /><link href="style.css" rel="stylesheet" /><link href="print.css" rel="stylesheet" media="print" /><link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="feed.xml" /><link href="favicon.ico" rel="icon" type="image/x-icon" /></head><body><div id="container"><div id="header"><a href="index.html"><img src="logo.png" alt="How to Node" class="logo" /><div class="tagline">The zen of coding in node.js</div></a></div><div id="main"><div class="article"><h1><a href="object-graphs-2.html">Learning Javascript with Object Graphs (Part II)</a></h1><p class="old-node-warning">HEADS UP! This article was written for an older version of node.&nbsp;More up-to-date information may be available elsewhere.</p><p>The first article using graphs to describe JavaScript semantics was so popular that I've decided to try the technique with some more advanced ideas.  In this article I'll explain three common techniques for creating objects.  They are constructor with prototype, pure prototypal, and object factory.</p>

<p>My goal is that this will help people understand the strengths and weaknesses of each technique and understand what's really going on.</p>

<h2>Classical JavaScript Constructors</h2>

<p>First let's create a simple constructor function with a prototype.  This is the closest thing to a class you're going to find in native JavaScript.  It's extremely powerful and efficient, but doesn't quite work like you would expect if coming from a language with classes.</p>

<div class="snippet"><a href="object-graphs-2/classical.js" class="code-link">classical.js<span class="hash">#rectangle</span></a><pre><code><span class="kwd">function</span><span class="pln"> </span><span class="typ">Rectangle</span><span class="pun">(</span><span class="pln">width</span><span class="pun">,</span><span class="pln"> height</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">width </span><span class="pun">=</span><span class="pln"> width</span><span class="pun">;</span><span class="pln"><br />&nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">height </span><span class="pun">=</span><span class="pln"> height</span><span class="pun">;</span><span class="pln"><br /></span><span class="pun">}</span><span class="pln"><br /></span><span class="typ">Rectangle</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">getArea </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> getArea</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">width </span><span class="pun">*</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">height</span><span class="pun">;</span><span class="pln"><br /></span><span class="pun">};</span><span class="pln"><br /></span><span class="typ">Rectangle</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">getPerimeter </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> getPerimeter</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">width </span><span class="pun">+</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">height</span><span class="pun">);</span><span class="pln"><br /></span><span class="pun">};</span><span class="pln"><br /></span><span class="typ">Rectangle</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">toString </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">constructor</span><span class="pun">.</span><span class="pln">name </span><span class="pun">+</span><span class="pln"> </span><span class="str">" a="</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">getArea</span><span class="pun">()</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">" p="</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">getPerimeter</span><span class="pun">();</span><span class="pln"><br /></span><span class="pun">};</span></code></pre></div>

<p>Now let's define a new class of objects called Squares that inherit from Rectangles.  To do inheritance, the constructor's <code>prototype</code> has to inherit from the parent constructor's <code>prototype</code>.  Here we're overriding <code>getPerimeter</code> to make it slightly more efficient and to show how to override functions.</p>

<div class="snippet"><a href="object-graphs-2/classical.js" class="code-link">classical.js<span class="hash">#square</span></a><pre><code><span class="kwd">function</span><span class="pln"> </span><span class="typ">Square</span><span class="pun">(</span><span class="pln">side</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">width </span><span class="pun">=</span><span class="pln"> side</span><span class="pun">;</span><span class="pln"><br />&nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">height </span><span class="pun">=</span><span class="pln"> side</span><span class="pun">;</span><span class="pln"><br /></span><span class="pun">}</span><span class="pln"><br /></span><span class="com">// Make Square inherit from Rectangle</span><span class="pln"><br /></span><span class="typ">Square</span><span class="pun">.</span><span class="pln">prototype </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">.</span><span class="pln">create</span><span class="pun">(</span><span class="typ">Rectangle</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> constructor</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> value</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Square</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">});</span><span class="pln"><br /></span><span class="com">// Override a method</span><span class="pln"><br /></span><span class="typ">Square</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">getPerimeter </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> getPerimeter</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">width </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"><br /></span><span class="pun">};</span></code></pre></div>

<p>Usage is straightforward.  Just create an instance of each and call a function on each.</p>

<div class="snippet"><a href="object-graphs-2/classical.js" class="code-link">classical.js<span class="hash">#test</span></a><pre><code><span class="kwd">var</span><span class="pln"> rect </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Rectangle</span><span class="pun">(</span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">);</span><span class="pln"><br /></span><span class="kwd">var</span><span class="pln"> sqr </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Square</span><span class="pun">(</span><span class="lit">5</span><span class="pun">);</span><span class="pln"><br />console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">rect</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">())</span><span class="pln"><br />console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">sqr</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">())</span></code></pre></div>

<p>This is the resulting data structure.  Dashed lines mean object inheritance.</p>

<p><img src="object-graphs-2/classical.png" alt="classical" title="" /></p>

<p><br style="clear:left"/></p>

<p>Notice that there is little difference between the <code>rect</code> instance and <code>Square.prototype</code>.  They are both simply objects that inherit from <code>Rectangle.prototype</code>.  JavaScript is just a series of linked objects when you get down to it.  The only objects that are special are functions in that they take parameters and can hold executable code and point to scopes.</p>

<h2>Pure Prototypal Objects</h2>

<p>Let's do the same example, but without using constructor functions.  This time we'll just use plain prototypal inheritance.</p>

<p>Let's define a Rectangle prototype that the base pattern for all our objects.</p>

<div class="snippet"><a href="object-graphs-2/prototypal.js" class="code-link">prototypal.js<span class="hash">#rectangle</span></a><pre><code><span class="kwd">var</span><span class="pln"> </span><span class="typ">Rectangle</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; name</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Rectangle"</span><span class="pun">,</span><span class="pln"><br />&nbsp; getArea</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> getArea</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">width </span><span class="pun">*</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">height</span><span class="pun">;</span><span class="pln"><br />&nbsp; </span><span class="pun">},</span><span class="pln"><br />&nbsp; getPerimeter</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> getPerimeter</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">width </span><span class="pun">+</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">height</span><span class="pun">);</span><span class="pln"><br />&nbsp; </span><span class="pun">},</span><span class="pln"><br />&nbsp; toString</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">+</span><span class="pln"> </span><span class="str">" a="</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">getArea</span><span class="pun">()</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">" p="</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">getPerimeter</span><span class="pun">();</span><span class="pln"><br />&nbsp; </span><span class="pun">}</span><span class="pln"><br /></span><span class="pun">};</span></code></pre></div>

<p>Now let's define a sub-object called Square that overrides some of the properties to change the behavior.</p>

<div class="snippet"><a href="object-graphs-2/prototypal.js" class="code-link">prototypal.js<span class="hash">#square</span></a><pre><code><span class="kwd">var</span><span class="pln"> </span><span class="typ">Square</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">.</span><span class="pln">create</span><span class="pun">(</span><span class="typ">Rectangle</span><span class="pun">);</span><span class="pln"><br /></span><span class="typ">Square</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Square"</span><span class="pun">;</span><span class="pln"><br /></span><span class="typ">Square</span><span class="pun">.</span><span class="pln">getArea </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> getArea</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">width </span><span class="pun">*</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">width</span><span class="pun">;</span><span class="pln"><br /></span><span class="pun">};</span><span class="pln"><br /></span><span class="typ">Square</span><span class="pun">.</span><span class="pln">getPerimeter </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> getPerimeter</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">width </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"><br /></span><span class="pun">};</span></code></pre></div>

<p>To create actual instances of these prototypes, we simply create new objects that inherit from the prototype objects and then set their local state manually.</p>

<div class="snippet"><a href="object-graphs-2/prototypal.js" class="code-link">prototypal.js<span class="hash">#test</span></a><pre><code><span class="kwd">var</span><span class="pln"> rect </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">.</span><span class="pln">create</span><span class="pun">(</span><span class="typ">Rectangle</span><span class="pun">);</span><span class="pln"><br />rect</span><span class="pun">.</span><span class="pln">width </span><span class="pun">=</span><span class="pln"> </span><span class="lit">6</span><span class="pun">;</span><span class="pln"><br />rect</span><span class="pun">.</span><span class="pln">height </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"><br /></span><span class="kwd">var</span><span class="pln"> square </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">.</span><span class="pln">create</span><span class="pun">(</span><span class="typ">Square</span><span class="pun">);</span><span class="pln"><br />square</span><span class="pun">.</span><span class="pln">width </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pun">;</span><span class="pln"><br />console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">rect</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">());</span><span class="pln"><br />console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">square</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">());</span></code></pre></div>

<p>Here is the resultant graph of objects.</p>

<p><img src="object-graphs-2/prototypal.png" alt="classical" title="" /></p>

<p><br style="clear:left"/></p>

<p>This isn't quite as powerful as the constructor + prototype method, but is often much easier to understand since there is less indirection.  Also if you come from a language that has pure prototypal inheritance, you'll be happy to know it's possible in JavaScript too.</p>

<h2>Object Factories</h2>

<p>One of my favorite methods for creating objects is to use a factory function.  The difference is that instead of defining a prototype object with all my shared functions and then creating instances of those, I simply call a function that returns a new object every time.  </p>

<p>This example is a super simple MVC system.  The controller function takes in as parameters the model and view objects and outputs a new controller object.  All state is stored in the closure via the scope.</p>

<div class="snippet"><a href="object-graphs-2/factory.js" class="code-link">factory.js<span class="hash">#controller</span></a><pre><code><span class="kwd">function</span><span class="pln"> </span><span class="typ">Controller</span><span class="pun">(</span><span class="pln">model</span><span class="pun">,</span><span class="pln"> view</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; view</span><span class="pun">.</span><span class="pln">update</span><span class="pun">(</span><span class="pln">model</span><span class="pun">.</span><span class="pln">value</span><span class="pun">);</span><span class="pln"><br />&nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; up</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> onUp</span><span class="pun">(</span><span class="pln">evt</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; model</span><span class="pun">.</span><span class="pln">value</span><span class="pun">++;</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; view</span><span class="pun">.</span><span class="pln">update</span><span class="pun">(</span><span class="pln">model</span><span class="pun">.</span><span class="pln">value</span><span class="pun">);</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">},</span><span class="pln"><br />&nbsp; &nbsp; down</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> onDown</span><span class="pun">(</span><span class="pln">evt</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; model</span><span class="pun">.</span><span class="pln">value</span><span class="pun">--;</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; view</span><span class="pun">.</span><span class="pln">update</span><span class="pun">(</span><span class="pln">model</span><span class="pun">.</span><span class="pln">value</span><span class="pun">);</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">},</span><span class="pln"><br />&nbsp; &nbsp; save</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> onSave</span><span class="pun">(</span><span class="pln">evt</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; model</span><span class="pun">.</span><span class="pln">save</span><span class="pun">();</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; view</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br />&nbsp; </span><span class="pun">};</span><span class="pln"><br /></span><span class="pun">}</span></code></pre></div>

<p>To use this, simply call the function with the desired parameters.  Notice how we can use these directly as event handlers (setTimeout) without having to first bind the function to the object.  Since it (the function) doesn't use <code>this</code> internally, there is no need to mess with the value of <code>this</code>.</p>

<div class="snippet"><a href="object-graphs-2/factory.js" class="code-link">factory.js<span class="hash">#usage</span></a><pre><code><span class="kwd">var</span><span class="pln"> on </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Controller</span><span class="pun">(</span><span class="pln"><br />&nbsp; </span><span class="com">// Inline a mock model</span><span class="pln"><br />&nbsp; </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; value</span><span class="pun">:</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"><br />&nbsp; &nbsp; save</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> save</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">"Saving value "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">value </span><span class="pun">+</span><span class="pln"> </span><span class="str">" somewhere"</span><span class="pun">);</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br />&nbsp; </span><span class="pun">},</span><span class="pln"><br />&nbsp; </span><span class="com">// Inline a mock view</span><span class="pln"><br />&nbsp; </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; update</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> update</span><span class="pun">(</span><span class="pln">newValue</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">"View now has "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> newValue</span><span class="pun">);</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">},</span><span class="pln"><br />&nbsp; &nbsp; close</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> close</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">"Now hiding view"</span><span class="pun">);</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br />&nbsp; </span><span class="pun">}</span><span class="pln"><br /></span><span class="pun">);</span><span class="pln"><br />setTimeout</span><span class="pun">(</span><span class="pln">on</span><span class="pun">.</span><span class="pln">up</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">);</span><span class="pln"><br />setTimeout</span><span class="pun">(</span><span class="pln">on</span><span class="pun">.</span><span class="pln">down</span><span class="pun">,</span><span class="pln"> </span><span class="lit">200</span><span class="pun">);</span><span class="pln"><br />setTimeout</span><span class="pun">(</span><span class="pln">on</span><span class="pun">.</span><span class="pln">save</span><span class="pun">,</span><span class="pln"> </span><span class="lit">300</span><span class="pun">);</span></code></pre></div>

<pre><code><span class="com">// Output</span><span class="pln"><br /></span><span class="typ">View</span><span class="pln"> now has </span><span class="lit">5</span><span class="pln"><br /></span><span class="typ">View</span><span class="pln"> now has </span><span class="lit">6</span><span class="pln"><br /></span><span class="typ">View</span><span class="pln"> now has </span><span class="lit">5</span><span class="pln"><br /></span><span class="typ">Saving</span><span class="pln"> value </span><span class="lit">5</span><span class="pln"> somewhere<br /></span><span class="typ">Now</span><span class="pln"> hiding view<br /></span></code></pre>

<p>Here is the object graph that results from this code.  Notice that we have access to the two passed in anonymous objects via the hidden <code>[scope]</code> property of the functions.  Or in other words, we have access to <code>model</code> and <code>view</code> from the closure created by the factory function.</p>

<p><img src="object-graphs-2/factory.png" alt="factory" title="" /></p>

<p><br style="clear:left"/></p>

<h2>Conclusion</h2>

<p>There is so much more I want to explore, but I like to keep these articles somewhat short and bite-size.  If there is demand, I'll write a part three explaining how to do ruby-style mixins and other advanced topics.</p><hr style="clear:both" /><div class="body" id="disqus_thread"></div>
<script type="text/javascript">
//<![CDATA[
var disqus_url = "http://howtonode.org/object-graphs-2";
//]]>
</script>
<script src="http://disqus.com/forums/howtonodeorg/embed.js" type="text/javascript"></script><a href="http://disqus.com/forums/howtonodeorg/?url=ref" class="view-thread">View the discussion thread.</a><a href="http://disqus.com/" class="dsq-brlink">blog comments powered by<span class="logo-disqus">Disqus</span></a>
<script type="text/javascript">
//<![CDATA[
(function() {
  var links = document.getElementsByTagName('a');
  var query = '?';
  for(var i = 0; i < links.length; i++) {
    if(links[i].href.indexOf('#disqus_thread') >= 0) {
      query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&amp;';
    }
  }
  document.write('<script charset="utf-8" type="text/javascript" src="//disqus.com/forums/howtonodeorg/get_num_replies.js' + query + '"></' + 'script>');
})();


//]]>
</script>
</div></div><div id="sidebar"><div class="aside author"><h4>About the Author</h4><img src="https://www.gravatar.com/avatar/c953ddd239707998340e1a6fbb3eeb46?r=pg&amp;s=200.jpg&amp;d=identicon" class="headshot" /><dl><dt>Name:</dt><dd>Tim Caswell</dd></dl><dl><dt>Github:</dt><dd><a href="https://github.com/creationix">creationix</a></dd></dl><dl><dt>Twitter:</dt><dd><a href="https://twitter.com/creationix">creationix</a></dd></dl><dl><dt>Location:</dt><dd>Red Lick, TX</dd></dl><dl><dt>Links:</dt><dd><a href="http://creationix.com/">Homepage</a></dd></dl></div><div class="aside"><h4>About this Article</h4><a href="http://twitter.com/share" data-count="horizontal" data-via="creationix" class="twitter-share-button">Tweet</a><script src="http://platform.twitter.com/widgets.js"></script><dl title="Mon Oct 11 2010 08:24:25 GMT-0700 (PDT)"><dt>Date Released:</dt><dd>Monday, October 11, 2010</dd></dl><dl><dt>Node Version:</dt><dd><a href="http://github.com/joyent/node/tree/v0.6.14">node v0.6.14</a></dd></dl><dl><dt>Code Samples:</dt><dd><ul><li><a href="object-graphs-2/classical.js">classical.js</a></li><li><a href="object-graphs-2/prototypal.js">prototypal.js</a></li><li><a href="object-graphs-2/factory.js">factory.js</a></li></ul></dd></dl><dl><dt>Revisions:</dt><dd><ul></ul></dd></dl></div><div class="bubble"><h3>About HowToNode.org</h3>

<p>HowToNode.org is a community supported blog created by <a href="http://creationix.com/">Tim Caswell</a>. The purpose of the blog is to teach how to do various tasks in <a href="http://nodejs.org/">node.js</a> as well as teach fundamental concepts that are needed to write effective code.</p>

<p>This site is powered by <a href="http://github.com/creationix/wheat">Wheat</a>, a git based blogging engine written in <a href="http://nodejs.org/">node.JS</a>.</p>

<p>The content for this site is stored in a <a href="http://github.com/creationix/howtonode.org">git repository</a> that anyone can fork, write an article, and send a pull request. If your article passes the quality standards it will be published and help support the greater node community.</p></div></div><div id="footer"><p>&copy; 2011-2014 Tim Caswell under the MIT license.</p><p>Content and articles are copyrighted to the individual authors. Design by&nbsp;<a href="https://bengourley.co.uk/">Ben Gourley</a>. All code snippets used in the examples are in the public domain.</p><p>Wheat v2 running on node.js v16.4.2</p></div></div>
<script type="text/javascript">
//<![CDATA[
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
//]]>
</script>

<script type="text/javascript">
//<![CDATA[
try {
var pageTracker = _gat._getTracker("UA-12824411-1");
pageTracker._trackPageview();
} catch(err) {}
//]]>
</script>
</body>
<!-- Mirrored from localhost:8080/object-graphs-2 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 13 Jul 2021 13:57:52 GMT -->
</html>