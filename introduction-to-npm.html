<!DOCTYPE html>
<html lang="en">
<!-- Mirrored from localhost:8080/introduction-to-npm by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 13 Jul 2021 13:58:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta charset="utf-8" /><title>Introduction to npm - How To Node - NodeJS</title><meta name="description" content="Learn the zen of coding in NodeJS." /><meta name="viewport" content="width=device-width" /><link href="style.css" rel="stylesheet" /><link href="print.css" rel="stylesheet" media="print" /><link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="feed.xml" /><link href="favicon.ico" rel="icon" type="image/x-icon" /></head><body><div id="container"><div id="header"><a href="index.html"><img src="logo.png" alt="How to Node" class="logo" /><div class="tagline">The zen of coding in node.js</div></a></div><div id="main"><div class="article"><h1><a href="introduction-to-npm.html">Introduction to npm</a></h1><p class="old-node-warning">HEADS UP! This article was written for an older version of node.&nbsp;More up-to-date information may be available elsewhere.</p><p>This was the third in a series of posts leading up to
<a href="http://nodeknockout.com/">Node.js Knockout</a> on how to use <a href="http://nodejs.org/">node.js</a>.</p>

<p>npm is a <a href="http://nodejs.org/">NodeJS</a> package manager. As its name would
imply, you can use it to install node programs. Also, if you use it
in development, it makes it easier to specify and link
dependencies.</p>

<h2>Installing npm</h2>

<p>First of all, install <a href="http://nodejs.org/">NodeJS</a>. Like so much of the NodeJS
ecosystem, npm is very young, so you'll generally have to use a
very recent version of node in order to use it. At the time of
writing this, that means at least version 0.1.103.</p>

<p>To install npm in one command, you can do this:</p>

<pre><code><span class="pln">curl http</span><span class="pun">:</span><span class="com">//npmjs.org/install.sh | sh</span><span class="pln"><br /></span></code></pre>

<p>Of course, if you're more paranoid than lazy, you can also get the
<a href="http://github.com/isaacs/npm">latest code</a>, check it all out, and when you're happy there's
nothing in there to pwn your machine, issue a <code>make install</code> or
<code>make dev</code>.</p>

<h2>what, no sudo?</h2>

<p><strong>I strongly encourage you not to do package management with sudo!</strong>
Packages can run arbitrary scripts, which makes sudoing a package
manager command as safe as a chainsaw haircut. Sure, it's fast and
definitely going to cut through any obstacles, but you might
actually <em>want</em> that obstacle to stay there.</p>

<p>I recommend doing this once instead:</p>

<pre><code><span class="pln">sudo chown </span><span class="pun">-</span><span class="pln">R $USER </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pln"><br /></span></code></pre>

<p>That sets your user account as the owner of the <code>/usr/local</code>
directory, so that you can just issue normal commands in there.
Then you won't ever have to use sudo when you install node or issue
npm commands.</p>

<p>It's much better this way. <code>/usr/local</code> is <em>supposed</em> to be the
stuff you installed, after all.</p>

<p><code>&lt;/rant&gt;</code></p>

<h2>Getting help: <code>npm help</code></h2>

<p>npm has a lot of help documentation about all of its commands. The
<code>npm help</code> command is your best friend. You can also tack <code>--help</code>
onto any npm command to get help on that one command.</p>

<h2>Installing stuff: <code>npm install</code></h2>

<p>You probably got npm because you want to install stuff. That's what
package managers do, they install stuff.</p>

<p><code>npm install blerg</code> installs the latest version of <code>blerg</code>. You can
also give <code>install</code> a tarball, a folder, or a url to a tarball. If
you run <code>npm install</code> without any arguments, it tries to install
the current folder.</p>

<p>This command can do a lot of stuff. <code>npm help install</code> will tell
you more than you ever wanted to know about it.</p>

<h2>Showing things: <code>npm ls</code></h2>

<p>The <code>npm ls</code> command shows what's on your system, and also what's
available in the registry. The arguments are beautifully colored
greps. For instance <code>npm ls installed</code> would show you what's
installed on your system. <code>npm ls installed marak</code> would show you
all the packages installed on your system created by <a href="http://jimbastard.com/">Marak</a>.</p>

<p><code>npm help ls</code> for more info.</p>

<h2>Updating packages: <code>npm update</code></h2>

<p>The <code>update</code> command does a few things.</p>

<ol>
<li>Search the registry for new versions of all the packages
installed.</li>
<li>If there's a newer version, then install it.</li>
<li>Point dependent packages at the new version, if it satisfies
their dependency.</li>
<li>Remove the old versions, if no other package names them as a
dependency.</li>
</ol>

<p>So basically, update behaves a lot like a "standard" package
manager's update command, except that it also checks to make sure
that the new version isn't going to break anything before it points
stuff at it.</p>

<p>You see, npm keeps you out of dependency hell.</p>

<h2>Development: <code>npm link</code></h2>

<p>The link command symlinks a package folder into your system, so
that changes are automatically reflected. It also installs the
<code>"dependencies"</code> and <code>"devDependencies"</code> packages from your
package.json file.</p>

<p>This is one of the most useful tools for developing programs with
node. Give your thing a name and a version in a <code>package.json</code>
file. Specify a few dependencies and a <code>main</code> module. Then run
<code>npm link</code>, and go to town coding it and testing it out in the node
repl. It's great.</p>

<p>npm is a development tool, first and foremost. People sometimes say
"Yeah, I haven't gotten time to check out that package manager
stuff yet. Maybe I will when my code is more stable."</p>

<p>That's like saying that you're going to start using source control
when your code is done. It's just silly. Source control should make
your process <em>easier</em>, and if it doesn't, then you're using a
broken SCM. Same for package management. It should make it easier,
and if it doesn't, then something is wrong.</p>

<p>npm isn't "for" publishing. That's just something it can do. It's
"for" playing. That's why I wrote it: to play with your code,
without having to remember a dozen different ways to install your
stuff, or having to get you all to structure your code the same
way.</p>

<p>It's <em>supposed</em> to make the process funner.</p>

<h2>Making a Package: The <code>package.json</code> file.</h2>

<p>The <code>package.json</code> file goes in the root of your package. It tells
npm how your package is structured, and what to do to install it.</p>

<p>Most of the time, you only need the <code>"name"</code>, <code>"version"</code>, and
<code>"main"</code> fields (even for node-waf compiled addons).</p>

<p>If you don't know <a href="http://json.org/">json</a>, then it's about time you learn it. It's
pretty easy.</p>

<p>Use <code>npm help json</code> to learn which fields npm cares about.
Basically, it's as simple as putting the package.json file in the
root of your project, and then telling it how to get to your code.</p>

<p>Seriously. It's incredibly easy. If you disagree, please
<a href="mailto:i@izs.me">let me know</a>.</p>

<h2>Acquiring Fame: <code>npm publish</code></h2>

<p>So, you created a package, and you can install it. Now you want the
everlasting fame and glory that comes with other people using your
code. There is no better way to ensure your immortality than
eventually being a part of every web app out there, and the
best—nay, the ONLY—way to truly accomplish this is to publish
nodejs packages.</p>

<p>First, create a user account with <code>npm adduser</code>. Give it a
username, password, and email address, and it'll create an account
on the npm registry. (You can also use adduser to authorize a user
account on a new machine, or fix the situation if you break your
configs.)</p>

<p>Next, go to the root of your package code, and do <code>npm publish</code>.</p>

<p>Bam. Done.</p>

<p>Now go to the mailing list and tell everyone how much more awesome
they'd be if they used your program.</p>

<h2>Dependency Hell Isn't Fun</h2>

<p>Most systems have a single root namespace. That kind of sucks. If
two different things depend on different versions of the same
dependency, then you've got two options:</p>

<ol>
<li>Statically compile the dependency into the program.</li>
<li>Hate life.</li>
</ol>

<p>Option #2 is Not Fun. So eff that noise. That sucks, and is dumb.</p>

<p>Option #1 is less than ideal if you want to be able to abstract
out parts of your program and benefit from updates to the
dependencies.</p>

<p>Thankfully, unlike most programming environments, the CommonJS
Securable Module system lets you avoid dependency hell by modifying
the <code>require.paths</code> at runtime, so that each package sees the
version that it depends on.</p>

<p>I think that's pretty cool.</p>

<h2>What to do when npm lets you down</h2>

<p>npm's pretty young software, and still being actively developed.
Especially if you find yourself using some newer features,
occasionally npm will have a bug. Or, perhaps equally likely,
you'll need npm to do something that it doesn't yet do, and want to
request a feature.</p>

<p>You can post bugs and feature requests on <a href="http://github.com/isaacs/npm/issues">the issues page</a>. If
you want to ask general questions, you can ask on
<a href="http://groups.google.com/group/npm-">the google group</a>.</p>

<p>Or, if you're more the instant gratification type, you can come ask
questions in IRC on <a href="irc://irc.freenode.net/#node.js">the #node.js channel on freenode.net</a>. If
I'm there, I'll try to help you out, but this community continues
to impress me with its helpfulness. Noders rock!</p><hr style="clear:both" /><div class="body" id="disqus_thread"></div>
<script type="text/javascript">
//<![CDATA[
var disqus_url = "http://howtonode.org/introduction-to-npm";
//]]>
</script>
<script src="http://disqus.com/forums/howtonodeorg/embed.js" type="text/javascript"></script><a href="http://disqus.com/forums/howtonodeorg/?url=ref" class="view-thread">View the discussion thread.</a><a href="http://disqus.com/" class="dsq-brlink">blog comments powered by<span class="logo-disqus">Disqus</span></a>
<script type="text/javascript">
//<![CDATA[
(function() {
  var links = document.getElementsByTagName('a');
  var query = '?';
  for(var i = 0; i < links.length; i++) {
    if(links[i].href.indexOf('#disqus_thread') >= 0) {
      query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&amp;';
    }
  }
  document.write('<script charset="utf-8" type="text/javascript" src="//disqus.com/forums/howtonodeorg/get_num_replies.js' + query + '"></' + 'script>');
})();


//]]>
</script>
</div></div><div id="sidebar"><div class="aside author"><h4>About the Author</h4><img src="https://www.gravatar.com/avatar/73a2b24daecb976af81e010b7a3ce3c6?r=pg&amp;s=200.jpg&amp;d=identicon" class="headshot" /><dl><dt>Name:</dt><dd>Isaac Z. Schlueter</dd></dl><dl><dt>Github:</dt><dd><a href="https://github.com/isaacs">isaacs</a></dd></dl><dl><dt>Twitter:</dt><dd><a href="https://twitter.com/izs">izs</a></dd></dl><dl><dt>Location:</dt><dd>Oakland, CA</dd></dl></div><div class="aside"><h4>About this Article</h4><a href="http://twitter.com/share" data-count="horizontal" data-via="creationix" class="twitter-share-button">Tweet</a><script src="http://platform.twitter.com/widgets.js"></script><dl title="Sat, 11 Sep 2010 23:05:24 GMT"><dt>Date Released:</dt><dd>Saturday, September 11, 2010</dd></dl><dl><dt>Node Version:</dt><dd><a href="http://github.com/joyent/node/tree/v0.2.1">node v0.2.1</a></dd></dl><dl><dt>Revisions:</dt><dd><ul></ul></dd></dl></div><div class="bubble"><h3>About HowToNode.org</h3>

<p>HowToNode.org is a community supported blog created by <a href="http://creationix.com/">Tim Caswell</a>. The purpose of the blog is to teach how to do various tasks in <a href="http://nodejs.org/">node.js</a> as well as teach fundamental concepts that are needed to write effective code.</p>

<p>This site is powered by <a href="http://github.com/creationix/wheat">Wheat</a>, a git based blogging engine written in <a href="http://nodejs.org/">node.JS</a>.</p>

<p>The content for this site is stored in a <a href="http://github.com/creationix/howtonode.org">git repository</a> that anyone can fork, write an article, and send a pull request. If your article passes the quality standards it will be published and help support the greater node community.</p></div></div><div id="footer"><p>&copy; 2011-2014 Tim Caswell under the MIT license.</p><p>Content and articles are copyrighted to the individual authors. Design by&nbsp;<a href="https://bengourley.co.uk/">Ben Gourley</a>. All code snippets used in the examples are in the public domain.</p><p>Wheat v2 running on node.js v16.4.2</p></div></div>
<script type="text/javascript">
//<![CDATA[
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
//]]>
</script>

<script type="text/javascript">
//<![CDATA[
try {
var pageTracker = _gat._getTracker("UA-12824411-1");
pageTracker._trackPageview();
} catch(err) {}
//]]>
</script>
</body>
<!-- Mirrored from localhost:8080/introduction-to-npm by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 13 Jul 2021 13:58:23 GMT -->
</html>