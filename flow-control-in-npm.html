<!DOCTYPE html>
<html lang="en">
<!-- Mirrored from localhost:8080/flow-control-in-npm by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 13 Jul 2021 13:58:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta charset="utf-8" /><title>Flow Control in npm - How To Node - NodeJS</title><meta name="description" content="Learn the zen of coding in NodeJS." /><meta name="viewport" content="width=device-width" /><link href="style.css" rel="stylesheet" /><link href="print.css" rel="stylesheet" media="print" /><link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="feed.xml" /><link href="favicon.ico" rel="icon" type="image/x-icon" /></head><body><div id="container"><div id="header"><a href="index.html"><img src="logo.png" alt="How to Node" class="logo" /><div class="tagline">The zen of coding in node.js</div></a></div><div id="main"><div class="article"><h1><a href="flow-control-in-npm.html">Flow Control in npm</a></h1><p class="old-node-warning">HEADS UP! This article was written for an older version of node.&nbsp;More up-to-date information may be available elsewhere.</p><p>Flow control is a popular subject in NodeJS.  Since most of us learned synchronous object-oriented programming patterns in school, it can be a bit of a shift to really leverage asynchronous functional programming for all it can do.</p>

<p>As it turns out, a great way to leverage huge chunks of the node API is to build a package manager.  npm has to do a lot of stuff with the file system, child processes, and HTTP requests to the registry.  Fetching and building packages is a lot of "laundry list" programming.  That is, the algorithms are very simple (fetch this file, put it over there, run that script, etc.), but there's a lot to do, and you've gotta make sure everything gets done right (and in the right order).</p>

<p>To keep this from getting out of hand, I've leveraged two fairly low-level patterns that are found throughout the NodeJS API, but which I haven't seen documented anywhere yet, and which I'm calling "the Action/Callback pattern".</p>

<h2>Action functions</h2>

<p>Action functions can take a variable amount of arguments, but the <em>last</em> argument is always a callback function.  It MUST call that cb exactly one time, once it's done doing stuff.</p>

<h2>Callback functions</h2>

<p>Callback functions can take any number of arguments, but the <em>first</em> argument is always an error or null.</p>

<h2>Example</h2>

<p>You've probably seen this example:</p>

<div class="snippet"><a href="flow-control-in-npm/read-file-example.js" class="code-link">read-file-example.js</a><pre><code><span class="pln">fs</span><span class="pun">.</span><span class="pln">readFile</span><span class="pun">(</span><span class="str">"/etc/passwd"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">er</span><span class="pun">,</span><span class="pln"> data</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">er</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throw</span><span class="pln"> er<br />&nbsp; </span><span class="com">// doSomething(data)</span><span class="pln"><br /></span><span class="pun">})</span></code></pre></div>

<p><code>fs.readFile</code> is an action function.  The function being passed to it, <code>function (er, data)...</code> is a callback function.</p>

<h2>Consistent Patterns are Consistent</h2>

<p>Every function in npm, if it does something async, does it using this mechanism.</p>

<p>Every callback function in npm, will expect an error argument as the first argument, so calling it like that will always bubble the error up.</p>

<h2>Polymorphism Wins</h2>

<p>Because of this consistent pattern, there is a lot of room for powerful creativity.</p>

<h3><code>asyncMap(list, fn, cb)</code></h3>

<p>Let's say you have a list of filenames, and you have to remove each one.  A pretty typical use case in npm, but once you generalize "do this to those", you start noticing nails in need of a hammer.</p>

<p><code>asyncMap</code> is the answer for that.  (The current async-map.js in npm is a bit more complicated, because it allows you to specify a list of functions rather than just one.)</p>

<div class="snippet"><a href="flow-control-in-npm/async-map.js" class="code-link">async-map.js</a><pre><code><span class="kwd">function</span><span class="pln"> asyncMap </span><span class="pun">(</span><span class="pln">list</span><span class="pun">,</span><span class="pln"> fn</span><span class="pun">,</span><span class="pln"> cb_</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">typeof</span><span class="pln"> cb_ </span><span class="pun">!==</span><span class="pln"> </span><span class="str">"function"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Error</span><span class="pun">(</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="str">"No callback provided to asyncMap"</span><span class="pun">)</span><span class="pln"><br />&nbsp; </span><span class="kwd">var</span><span class="pln"> data </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">,</span><span class="pln"> errState </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">,</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> list</span><span class="pun">.</span><span class="pln">length<br />&nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">l</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> cb_</span><span class="pun">(</span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[])</span><span class="pln"><br />&nbsp; </span><span class="kwd">function</span><span class="pln"> cb </span><span class="pun">(</span><span class="pln">er</span><span class="pun">,</span><span class="pln"> d</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">errState</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">arguments</span><span class="pun">.</span><span class="pln">length </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> data </span><span class="pun">=</span><span class="pln"> data</span><span class="pun">.</span><span class="pln">concat</span><span class="pun">(</span><span class="pln">d</span><span class="pun">)</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">er</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> cb_</span><span class="pun">(</span><span class="pln">errState </span><span class="pun">=</span><span class="pln"> er</span><span class="pun">,</span><span class="pln"> data</span><span class="pun">)</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(--</span><span class="pln"> l </span><span class="pun">===</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> cb_</span><span class="pun">(</span><span class="pln">errState</span><span class="pun">,</span><span class="pln"> data</span><span class="pun">)</span><span class="pln"><br />&nbsp; </span><span class="pun">}</span><span class="pln"><br />&nbsp; list</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ar</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> fn</span><span class="pun">(</span><span class="pln">ar</span><span class="pun">,</span><span class="pln"> cb</span><span class="pun">)</span><span class="pln"> </span><span class="pun">})</span><span class="pln"><br /></span><span class="pun">}</span></code></pre></div>

<p>Note that the top-level <code>cb_</code> function is called with an array of all the results.  So, data is being proxied up, as well as errors.  (That's why it's called async<strong>Map</strong>, rather than async<strong>ForEach</strong>.)</p>

<p>So, now we can simply do this:</p>

<div class="snippet"><a href="flow-control-in-npm/remove-file-list.js" class="code-link">remove-file-list.js</a><pre><code><span class="kwd">function</span><span class="pln"> removeFileList</span><span class="pun">(</span><span class="pln">fileList</span><span class="pun">,</span><span class="pln"> cb</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; asyncMap</span><span class="pun">(</span><span class="pln">fileList</span><span class="pun">,</span><span class="pln"> rm</span><span class="pun">,</span><span class="pln"> cb</span><span class="pun">)</span><span class="pln"><br /></span><span class="pun">}</span></code></pre></div>

<h3>Proxying</h3>

<p>You catch that?  An Action function can pass its own cb over to another Action function if it doesn't need to do anything with success or failure.  We could also have done something like this:</p>

<div class="snippet"><a href="flow-control-in-npm/proxying.js" class="code-link">proxying.js</a><pre><code><span class="kwd">function</span><span class="pln"> removeFileList </span><span class="pun">(</span><span class="pln">fileList</span><span class="pun">,</span><span class="pln"> cb</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; asyncMap</span><span class="pun">(</span><span class="pln">fileList</span><span class="pun">,</span><span class="pln"> rm</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">er</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">er</span><span class="pun">)</span><span class="pln"> log</span><span class="pun">(</span><span class="str">"Failed to remove fileList!"</span><span class="pun">)</span><span class="pln"><br />&nbsp; &nbsp; cb</span><span class="pun">(</span><span class="pln">er</span><span class="pun">)</span><span class="pln"><br />&nbsp; </span><span class="pun">})</span><span class="pln"><br /></span><span class="pun">}</span></code></pre></div>

<h3><code>chain(fn1, fn2, ..., cb)</code></h3>

<p>There are other cases where you want to make sure that a list of functions are called in a specific order.  For instance, we need to make sure that all <code>preinstall</code> scripts are done running before starting in on the <code>install</code> scripts.  That's where <code>chain</code> comes in handy.</p>

<p><code>chain</code> takes a list of function arguments which take a callback, and a final argument which is the ultimate callback function.</p>

<div class="snippet"><a href="flow-control-in-npm/chain.js" class="code-link">chain.js</a><pre><code><span class="kwd">function</span><span class="pln"> chain </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; </span><span class="kwd">var</span><span class="pln"> steps </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Array</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">slice</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="pln">arguments</span><span class="pun">)</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">,</span><span class="pln"> cb_ </span><span class="pun">=</span><span class="pln"> steps</span><span class="pun">.</span><span class="pln">pop</span><span class="pun">()</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">,</span><span class="pln"> n </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">,</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> steps</span><span class="pun">.</span><span class="pln">length<br />&nbsp; </span><span class="kwd">function</span><span class="pln"> cb </span><span class="pun">(</span><span class="pln">er</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">er</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> cb_</span><span class="pun">(</span><span class="pln">er</span><span class="pun">)</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(++</span><span class="pln"> n </span><span class="pun">===</span><span class="pln"> l</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> cb_</span><span class="pun">()</span><span class="pln"><br />&nbsp; &nbsp; steps</span><span class="pun">[</span><span class="pln">n</span><span class="pun">](</span><span class="pln">cb</span><span class="pun">)</span><span class="pln"><br />&nbsp; </span><span class="pun">}</span><span class="pln"><br />&nbsp; steps</span><span class="pun">[</span><span class="pln">n</span><span class="pun">](</span><span class="pln">cb</span><span class="pun">)</span><span class="pln"><br /></span><span class="pun">}</span></code></pre></div>

<h3>chain 2</h3>

<p>This is great, but it requires using Function#bind if we want to pass arguments to those functions other than a callback.  This API would be nice:</p>

<div class="snippet"><a href="flow-control-in-npm/chain2-usage.js" class="code-link">chain2-usage.js</a><pre><code><span class="pln">chain</span><span class="pun">(</span><span class="pln"> </span><span class="pun">[</span><span class="pln">fn1</span><span class="pun">,</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">]</span><span class="pln"><br />&nbsp; &nbsp; &nbsp;</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="pln">obj</span><span class="pun">,</span><span class="pln"> </span><span class="str">"method"</span><span class="pun">,</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> z</span><span class="pun">]</span><span class="pln"><br />&nbsp; &nbsp; &nbsp;</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">cb</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> doSomething</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="pln">cb</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}</span><span class="pln"><br />&nbsp; &nbsp; &nbsp;</span><span class="pun">,</span><span class="pln"> cb<br />&nbsp; &nbsp; &nbsp;</span><span class="pun">)</span></code></pre></div>

<p>Basically, each argument is one of:</p>

<ul>
<li>a function which will be called with a single cb argument</li>
<li>an array containing a function and 0 or more arguments</li>
<li>an array containing an object, a method name, and 0 or more arguments</li>
<li>a falsey value, so we can do stuff like:
 foo &amp;&amp; [ doFoo, foo, bar ]</li>
</ul>

<p>Revamped to handle this calling style, chain looks like this:</p>

<div class="snippet"><a href="flow-control-in-npm/chain2.js" class="code-link">chain2.js</a><pre><code><span class="kwd">function</span><span class="pln"> chain </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; </span><span class="kwd">var</span><span class="pln"> steps </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Array</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">slice</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="pln">arguments</span><span class="pun">)</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">,</span><span class="pln"> cb_ </span><span class="pun">=</span><span class="pln"> steps</span><span class="pun">.</span><span class="pln">pop</span><span class="pun">()</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">,</span><span class="pln"> n </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">,</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> steps</span><span class="pun">.</span><span class="pln">length<br />&nbsp; nextStep</span><span class="pun">(</span><span class="pln">cb</span><span class="pun">)</span><span class="pln"><br />&nbsp; </span><span class="kwd">function</span><span class="pln"> cb </span><span class="pun">(</span><span class="pln">er</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">er</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> cb_</span><span class="pun">(</span><span class="pln">er</span><span class="pun">)</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(++</span><span class="pln"> n </span><span class="pun">===</span><span class="pln"> l</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> cb_</span><span class="pun">()</span><span class="pln"><br />&nbsp; &nbsp; nextStep</span><span class="pun">(</span><span class="pln">cb</span><span class="pun">)</span><span class="pln"><br />&nbsp; </span><span class="pun">}</span><span class="pln"><br />&nbsp; </span><span class="kwd">function</span><span class="pln"> nextStep </span><span class="pun">(</span><span class="pln">cb</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">var</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> steps</span><span class="pun">[</span><span class="pln">n</span><span class="pun">]</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="com">// skip over falsey members</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">s</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> cb</span><span class="pun">()</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="com">// simple function</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">typeof</span><span class="pln"> s </span><span class="pun">===</span><span class="pln"> </span><span class="str">"function"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> s</span><span class="pun">(</span><span class="pln">cb</span><span class="pun">)</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="typ">Array</span><span class="pun">.</span><span class="pln">isArray</span><span class="pun">(</span><span class="pln">s</span><span class="pun">))</span><span class="pln"> </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Error</span><span class="pun">(</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; </span><span class="str">"Invalid thing in chain: "</span><span class="pun">+</span><span class="pln">s</span><span class="pun">)</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">var</span><span class="pln"> obj </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; </span><span class="pun">,</span><span class="pln"> fn </span><span class="pun">=</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">shift</span><span class="pun">()</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">typeof</span><span class="pln"> fn </span><span class="pun">===</span><span class="pln"> </span><span class="str">"object"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; </span><span class="com">// [obj, "method", some, args]</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; obj </span><span class="pun">=</span><span class="pln"> fn<br />&nbsp; &nbsp; &nbsp; fn </span><span class="pun">=</span><span class="pln"> obj</span><span class="pun">[</span><span class="pln">s</span><span class="pun">.</span><span class="pln">shift</span><span class="pun">()]</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">typeof</span><span class="pln"> fn </span><span class="pun">!==</span><span class="pln"> </span><span class="str">"function"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Error</span><span class="pun">(</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; </span><span class="str">"Invalid thing in chain: "</span><span class="pun">+</span><span class="kwd">typeof</span><span class="pun">(</span><span class="pln">fn</span><span class="pun">))</span><span class="pln"><br />&nbsp; &nbsp; fn</span><span class="pun">.</span><span class="pln">apply</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">concat</span><span class="pun">(</span><span class="pln">cb</span><span class="pun">))</span><span class="pln"><br />&nbsp; </span><span class="pun">}</span><span class="pln"><br /></span><span class="pun">}</span></code></pre></div>

<h2>Mix and Match</h2>

<p>Because everything in npm (and a lot of things in node) use this pattern, you can mix very high-level operations with very low-level operations.  Why, even <code>chain</code> and <code>asyncMap</code> are "action" functions, so they can take any vanilla callback, or be arguments to one another.</p>

<p>This is without any sophisticated "async flow control" library.  Just a few short JavaScript functions and an adherence to a few simple patterns.</p>

<p>As long as you stick to these patterns, you can use any Action function in any asyncMap or chain call, and make sure that all Action functions call their cb exactly once.</p>

<p>Get creative!  This language is powerful, and it's not that hard to do interesting things with it.</p><hr style="clear:both" /><div class="body" id="disqus_thread"></div>
<script type="text/javascript">
//<![CDATA[
var disqus_url = "http://howtonode.org/flow-control-in-npm";
//]]>
</script>
<script src="http://disqus.com/forums/howtonodeorg/embed.js" type="text/javascript"></script><a href="http://disqus.com/forums/howtonodeorg/?url=ref" class="view-thread">View the discussion thread.</a><a href="http://disqus.com/" class="dsq-brlink">blog comments powered by<span class="logo-disqus">Disqus</span></a>
<script type="text/javascript">
//<![CDATA[
(function() {
  var links = document.getElementsByTagName('a');
  var query = '?';
  for(var i = 0; i < links.length; i++) {
    if(links[i].href.indexOf('#disqus_thread') >= 0) {
      query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&amp;';
    }
  }
  document.write('<script charset="utf-8" type="text/javascript" src="//disqus.com/forums/howtonodeorg/get_num_replies.js' + query + '"></' + 'script>');
})();


//]]>
</script>
</div></div><div id="sidebar"><div class="aside author"><h4>About the Author</h4><img src="https://www.gravatar.com/avatar/73a2b24daecb976af81e010b7a3ce3c6?r=pg&amp;s=200.jpg&amp;d=identicon" class="headshot" /><dl><dt>Name:</dt><dd>Isaac Z. Schlueter</dd></dl><dl><dt>Github:</dt><dd><a href="https://github.com/isaacs">isaacs</a></dd></dl><dl><dt>Twitter:</dt><dd><a href="https://twitter.com/izs">izs</a></dd></dl><dl><dt>Location:</dt><dd>Oakland, CA</dd></dl></div><div class="aside"><h4>About this Article</h4><a href="http://twitter.com/share" data-count="horizontal" data-via="creationix" class="twitter-share-button">Tweet</a><script src="http://platform.twitter.com/widgets.js"></script><dl title="2010-08-31T22:29:18"><dt>Date Released:</dt><dd>Tuesday, August 31, 2010</dd></dl><dl><dt>Node Version:</dt><dd><a href="http://github.com/joyent/node/tree/0.2.0">node 0.2.0</a></dd></dl><dl><dt>Code Samples:</dt><dd><ul><li><a href="flow-control-in-npm/read-file-example.js">read-file-example.js</a></li><li><a href="flow-control-in-npm/async-map.js">async-map.js</a></li><li><a href="flow-control-in-npm/remove-file-list.js">remove-file-list.js</a></li><li><a href="flow-control-in-npm/proxying.js">proxying.js</a></li><li><a href="flow-control-in-npm/chain.js">chain.js</a></li><li><a href="flow-control-in-npm/chain2-usage.js">chain2-usage.js</a></li><li><a href="flow-control-in-npm/chain2.js">chain2.js</a></li></ul></dd></dl><dl><dt>Revisions:</dt><dd><ul></ul></dd></dl></div><div class="bubble"><h3>About HowToNode.org</h3>

<p>HowToNode.org is a community supported blog created by <a href="http://creationix.com/">Tim Caswell</a>. The purpose of the blog is to teach how to do various tasks in <a href="http://nodejs.org/">node.js</a> as well as teach fundamental concepts that are needed to write effective code.</p>

<p>This site is powered by <a href="http://github.com/creationix/wheat">Wheat</a>, a git based blogging engine written in <a href="http://nodejs.org/">node.JS</a>.</p>

<p>The content for this site is stored in a <a href="http://github.com/creationix/howtonode.org">git repository</a> that anyone can fork, write an article, and send a pull request. If your article passes the quality standards it will be published and help support the greater node community.</p></div></div><div id="footer"><p>&copy; 2011-2014 Tim Caswell under the MIT license.</p><p>Content and articles are copyrighted to the individual authors. Design by&nbsp;<a href="https://bengourley.co.uk/">Ben Gourley</a>. All code snippets used in the examples are in the public domain.</p><p>Wheat v2 running on node.js v16.4.2</p></div></div>
<script type="text/javascript">
//<![CDATA[
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
//]]>
</script>

<script type="text/javascript">
//<![CDATA[
try {
var pageTracker = _gat._getTracker("UA-12824411-1");
pageTracker._trackPageview();
} catch(err) {}
//]]>
</script>
</body>
<!-- Mirrored from localhost:8080/flow-control-in-npm by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 13 Jul 2021 13:58:36 GMT -->
</html>