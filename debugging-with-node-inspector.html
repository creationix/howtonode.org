<!DOCTYPE html>
<html lang="en">
<!-- Mirrored from localhost:8080/debugging-with-node-inspector by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 13 Jul 2021 13:58:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta charset="utf-8" /><title>Debugging with node-inspector - How To Node - NodeJS</title><meta name="description" content="Learn the zen of coding in NodeJS." /><meta name="viewport" content="width=device-width" /><link href="style.css" rel="stylesheet" /><link href="print.css" rel="stylesheet" media="print" /><link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="feed.xml" /><link href="favicon.ico" rel="icon" type="image/x-icon" /></head><body><div id="container"><div id="header"><a href="index.html"><img src="logo.png" alt="How to Node" class="logo" /><div class="tagline">The zen of coding in node.js</div></a></div><div id="main"><div class="article"><h1><a href="debugging-with-node-inspector.html">Debugging with node-inspector</a></h1><p class="old-node-warning">HEADS UP! This article was written for an older version of node.&nbsp;More up-to-date information may be available elsewhere.</p><p>This was the fourth in a series of posts leading up
to <a href="http://nodeknockout.com/">Node.js Knockout</a> on how to
use <a href="http://nodejs.org/">node.js</a>. This post was recorded
by <a href="http://github.com/dannycoates/node-inspector">node-inspector</a> author
and <a href="http://nodeknockout.com/judging#danny_coates">Node.js Knockout judge</a> Danny Coates.</p>

<h2>Video</h2>

<p>Check out this sweet screencast where Danny explains how to use
<a href="http://github.com/dannycoates/node-inspector">node-inspector</a>:</p>

<p><object height="300" width="500"><param name="movie" value="http://www.youtube.com/v/AOnK3NVnxL8&amp;hl=en&amp;fs=1&amp;hd=1" /></param><param name="wmode" value="window" /><param name="allowFullScreen" value="true" /></param><param name="allowscriptaccess" value="always" /></param><embed src="http://www.youtube.com/v/AOnK3NVnxL8&amp;hl=en&amp;fs=1&amp;hd=1" allowfullscreen="true" type="application/x-shockwave-flash" allowscriptaccess="always" wmode="window" height="300" width="500"></embed></object></p>

<h2>Transcription</h2>

<p>Hi this is Danny Coates. Since Node Knockout is coming up pretty soon I'd like to give you a quick introduction to Node Inspector, which is a graphical debugger for Node.</p>

<p>It's hosted on GitHub, you can go check it out there. Let's get started with the demo. To start the inspector I'm going to run it from the node-chat directory (node-chat is a sample application), like this:</p>

<pre><code><span class="pln">$ node </span><span class="pun">../</span><span class="pln">node</span><span class="pun">-</span><span class="pln">inspector</span><span class="pun">/</span><span class="pln">bin</span><span class="pun">/</span><span class="pln">inspector</span><span class="pun">.</span><span class="pln">js </span><span class="pun">--</span><span class="pln">start</span><span class="pun">-</span><span class="pln">brk</span><span class="pun">=</span><span class="pln">server</span><span class="pun">.</span><span class="pln">js </span><span class="pun">\</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">--</span><span class="pln">forward</span><span class="pun">-</span><span class="pln">io </span><span class="pun">--</span><span class="pln">profile<br /></span></code></pre>

<p>When I pass it the <code>--start-brk</code> parameter we're going to end up with two processes; the one we're debugging will be a child process of the inspector process. If I quit the profile it'll also close down the node-chat app.</p>

<p>Let's pull up the debugger. Since I did <code>--start-brk</code> intead of <code>--start</code> I'm going to get a breakpoint on the very first line; it's useful for debugging short lived apps.</p>

<p>Let me walk you through the interface. We have three panels; Scripts, Profiles (which isn't active in the main branch yet) and Console. The console is a standard JavaScript console; it'll run whatever you type in there in Node's V8.</p>

<p>There's also a pull down menu of your JavaScript files, and some controls to step over, step in, step out and pause the script. There are also expressions to watch, and the call stack. You can step to any level in the call stack. Beneath the stack you can see your locally and globally scoped variables, followed by your list of breakpoints.</p>

<p>If you click on a breakpoint it'll jump to the relevant line in your code.</p>

<p>Let's step through the node-chat app, to see what's going on. One of the nice things is that you can do a mouseover on some code, and it'll give you a popup of what that value is.</p>

<p>It looks like we're setting some intervals, hooking up some routes... That join function looks interesting, let's stick a breakpoint there, and then continue. We can pull up a mini console view, and we'll see that we've got some output on stdout (which is the same thing as the output on the command line).</p>

<p>Let's go ahead an open a couple of node-chat windows. Back in Node Inspector, we should have hit the breakpoint. If we want to see what simpleJSON does but we don't want to step in, we can mouse over it and get the source code in a popup.</p>

<p>Let's step in to create session. Then let's step out, and add a watch on sessions. Watches will update every time you hit a breakpoint or step through the code. Let's play through, and see me join the chat.</p>

<p>One of the other cool things you can do is live edit the code. If you just double click in the code you can then enter text that will be executed the next time the code is run.</p>

<p>You can also use the console to execute stuff, and this'll run in Node. console.log output will appear on the forwarded stdout, and in the regular stdout in the terminal.</p>

<p>One more thing; even though it doesn't work in the current main branch it's cool, so let's have a look. You can take a heap snapshot at any time, and you get to see the total number of objects, and the size of everything. You can then run the app some more, and take another snapshot; it'll give you a comparison between the two snapshots. If, for example, a count keeps going up, you might have a memory leak.</p>

<p>That's really the quick tour. If you're interested, go check out <a href="https://github.com/dannycoates/node-inspector">Node Inspector on GitHub</a>.</p>

<p>If you have any problems add an issue, and I'll look at that when I get a chance. Check out the Wiki for things that might be helpful.</p>

<p>Thanks for watching.</p><hr style="clear:both" /><div class="body" id="disqus_thread"></div>
<script type="text/javascript">
//<![CDATA[
var disqus_url = "http://howtonode.org/debugging-with-node-inspector";
//]]>
</script>
<script src="http://disqus.com/forums/howtonodeorg/embed.js" type="text/javascript"></script><a href="http://disqus.com/forums/howtonodeorg/?url=ref" class="view-thread">View the discussion thread.</a><a href="http://disqus.com/" class="dsq-brlink">blog comments powered by<span class="logo-disqus">Disqus</span></a>
<script type="text/javascript">
//<![CDATA[
(function() {
  var links = document.getElementsByTagName('a');
  var query = '?';
  for(var i = 0; i < links.length; i++) {
    if(links[i].href.indexOf('#disqus_thread') >= 0) {
      query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&amp;';
    }
  }
  document.write('<script charset="utf-8" type="text/javascript" src="//disqus.com/forums/howtonodeorg/get_num_replies.js' + query + '"></' + 'script>');
})();


//]]>
</script>
</div></div><div id="sidebar"><div class="aside author"><h4>About the Author</h4><img src="https://www.gravatar.com/avatar/e2cd46cb86afb7667b290ef056e8c161?r=pg&amp;s=200.jpg&amp;d=identicon" class="headshot" /><dl><dt>Name:</dt><dd>Danny Coates</dd></dl><dl><dt>Github:</dt><dd><a href="https://github.com/dannycoates">dannycoates</a></dd></dl><dl><dt>Links:</dt><dd><a href="http://dannycoates.com/">Homepage</a></dd></dl></div><div class="aside"><h4>About this Article</h4><a href="http://twitter.com/share" data-count="horizontal" data-via="creationix" class="twitter-share-button">Tweet</a><script src="http://platform.twitter.com/widgets.js"></script><dl title="Sat Sep 11 2010 16:42:29 GMT-0700 (PDT)"><dt>Date Released:</dt><dd>Saturday, September 11, 2010</dd></dl><dl><dt>Node Version:</dt><dd><a href="http://github.com/joyent/node/tree/v0.2.1">node v0.2.1</a></dd></dl><dl><dt>Revisions:</dt><dd><ul></ul></dd></dl></div><div class="bubble"><h3>About HowToNode.org</h3>

<p>HowToNode.org is a community supported blog created by <a href="http://creationix.com/">Tim Caswell</a>. The purpose of the blog is to teach how to do various tasks in <a href="http://nodejs.org/">node.js</a> as well as teach fundamental concepts that are needed to write effective code.</p>

<p>This site is powered by <a href="http://github.com/creationix/wheat">Wheat</a>, a git based blogging engine written in <a href="http://nodejs.org/">node.JS</a>.</p>

<p>The content for this site is stored in a <a href="http://github.com/creationix/howtonode.org">git repository</a> that anyone can fork, write an article, and send a pull request. If your article passes the quality standards it will be published and help support the greater node community.</p></div></div><div id="footer"><p>&copy; 2011-2014 Tim Caswell under the MIT license.</p><p>Content and articles are copyrighted to the individual authors. Design by&nbsp;<a href="https://bengourley.co.uk/">Ben Gourley</a>. All code snippets used in the examples are in the public domain.</p><p>Wheat v2 running on node.js v16.4.2</p></div></div>
<script type="text/javascript">
//<![CDATA[
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
//]]>
</script>

<script type="text/javascript">
//<![CDATA[
try {
var pageTracker = _gat._getTracker("UA-12824411-1");
pageTracker._trackPageview();
} catch(err) {}
//]]>
</script>
</body>
<!-- Mirrored from localhost:8080/debugging-with-node-inspector by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 13 Jul 2021 13:58:23 GMT -->
</html>