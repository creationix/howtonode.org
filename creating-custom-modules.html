<!DOCTYPE html>
<html lang="en">
<!-- Mirrored from localhost:8080/creating-custom-modules by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 13 Jul 2021 13:59:08 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta charset="utf-8" /><title>Creating Custom Modules - How To Node - NodeJS</title><meta name="description" content="Learn the zen of coding in NodeJS." /><meta name="viewport" content="width=device-width" /><link href="style.css" rel="stylesheet" /><link href="print.css" rel="stylesheet" media="print" /><link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="feed.xml" /><link href="favicon.ico" rel="icon" type="image/x-icon" /></head><body><div id="container"><div id="header"><a href="index.html"><img src="logo.png" alt="How to Node" class="logo" /><div class="tagline">The zen of coding in node.js</div></a></div><div id="main"><div class="article"><h1><a href="creating-custom-modules.html">Creating Custom Modules</a></h1><p class="old-node-warning">HEADS UP! This article was written for an older version of node.&nbsp;More up-to-date information may be available elsewhere.</p><p>Node implements <a href="http://commonjs.org/specs/modules/1.0/">CommonJS Modules 1.0</a>. Node's <a href="http://nodejs.org/api.html#modules-285">full API doc.</a> explains their use thoroughly, but can be a bit tricky to get started.</p>

<p>This tutorial explains the why and how you can use Node's module system to help structure your application.</p>

<h2>Creating a Module</h2>

<p>A module is just a javascript file.  Put some JS in a file and BAM! you have a module.  Good show!</p>

<div class="snippet"><a href="creating-custom-modules/simplest-module-ever.js" class="code-link">simplest-module-ever.js</a><pre><code><span class="pln">answer </span><span class="pun">=</span><span class="pln"> </span><span class="lit">42</span><span class="pun">;</span><span class="pln"> </span><span class="com">// What is the question?</span></code></pre></div>

<h2>Um, so why is there a tutorial?</h2>

<p>Unfortunately, you won't be able to do anything with it just yet.</p>

<div class="snippet"><a href="creating-custom-modules/simplest-module-ever-test.js" class="code-link">simplest-module-ever-test.js</a><pre><code><span class="kwd">var</span><span class="pln"> simple </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'./simplest-module-ever'</span><span class="pun">);</span><span class="pln"><br /><br /></span><span class="com">// This will throw an error!</span><span class="pln"><br />console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">simple</span><span class="pun">.</span><span class="pln">answer</span><span class="pun">);</span></code></pre></div>

<p>There's a good reason, and it has to do with playing well with others.  One of the biggest problems in JavaScript is name collisions.  Here's an example: You get one script that makes a cool date picker and another that does a day-by-day schedule and they both define a drawCalendar() function and now it all breaks and how the heck are you going to fix it?  This happens because both names are declared in what's called the global name space.</p>

<p>You know how I said that a module is just a javascript file? Well, that's true, but it is evaluated in a special way.  When Node loads your javascript file it creates a new scope, so your date picker plugin can't mess with my schedule plugin.  When you are in your module, you can't see the outside world; you can just do your own thing or require other modules.  As a result, you don't have to worry about clashing with other people's stuff.</p>

<h2>If you can't add to the global name space, then how do you share your code?</h2>

<p>Inside your javascript file, there is a special object. When Node creates the new context for your module, it sprinkles some objects in there like a little salt and pepper.  The <a href="https://nodejs.org/api/globals.html">official Global Objects API</a> hints at the answer, but seeing is much simpler.</p>

<div class="snippet"><a href="creating-custom-modules/simplest-module-ever-complete.js" class="code-link">simplest-module-ever-complete.js</a><pre><code><span class="pln">exports</span><span class="pun">.</span><span class="pln">answer </span><span class="pun">=</span><span class="pln"> </span><span class="lit">42</span><span class="pun">;</span><span class="pln"> </span><span class="com">// What is the question?</span></code></pre></div>

<p>And now this will work the way we want.</p>

<div class="snippet"><a href="creating-custom-modules/simplest-module-ever-complete-test.js" class="code-link">simplest-module-ever-complete-test.js</a><pre><code><span class="kwd">var</span><span class="pln"> simple </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'./simplest-module-ever-complete'</span><span class="pun">);</span><span class="pln"><br /><br /></span><span class="com">// This will output 42</span><span class="pln"><br />console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">simple</span><span class="pun">.</span><span class="pln">answer</span><span class="pun">);</span></code></pre></div>

<h2>Using Parts of Modules</h2>

<p>The basic example on the <a href="http://nodejs.org/">Node.JS Home Page</a> shows you how to import whole modules.</p>

<p>When you want to use a port of a Module you use the require function like usual, but only save a reference to a member of the returned exports object:</p>

<pre><code><span class="kwd">var</span><span class="pln"> inspect </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'sys'</span><span class="pun">).</span><span class="pln">inspect</span><span class="pun">;</span><span class="pln"><br /></span></code></pre>

<p>This creates a local variable, 'inspect' and assigns it to the 'inspect' property of the sys module.</p>

<p>So now you can</p>

<pre><code><span class="pln">inspect</span><span class="pun">({</span><span class="typ">Hello</span><span class="pun">:</span><span class="str">"World"</span><span class="pun">})</span><span class="pln"><br /></span></code></pre>

<p>which is like <code>sys.inspect({Hello:"World"})</code> without having to type <code>sys.inspect</code> all the time.</p>

<p>Normal JavaScript function binding rules apply, so if you have any weirdness that you can't figure out, just import the whole module and use it like usual until you <a href="http://www.reactive.io/tips/2009/04/28/binding-scope-in-javascript/">Learn more about JavaScript Binding</a></p><hr style="clear:both" /><div class="body" id="disqus_thread"></div>
<script type="text/javascript">
//<![CDATA[
var disqus_url = "http://howtonode.org/creating-custom-modules";
//]]>
</script>
<script src="http://disqus.com/forums/howtonodeorg/embed.js" type="text/javascript"></script><a href="http://disqus.com/forums/howtonodeorg/?url=ref" class="view-thread">View the discussion thread.</a><a href="http://disqus.com/" class="dsq-brlink">blog comments powered by<span class="logo-disqus">Disqus</span></a>
<script type="text/javascript">
//<![CDATA[
(function() {
  var links = document.getElementsByTagName('a');
  var query = '?';
  for(var i = 0; i < links.length; i++) {
    if(links[i].href.indexOf('#disqus_thread') >= 0) {
      query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&amp;';
    }
  }
  document.write('<script charset="utf-8" type="text/javascript" src="//disqus.com/forums/howtonodeorg/get_num_replies.js' + query + '"></' + 'script>');
})();


//]]>
</script>
</div></div><div id="sidebar"><div class="aside author"><h4>About the Author</h4><img src="https://www.gravatar.com/avatar/e841415081a623b7f4d2cf02ae2320a2?r=pg&amp;s=200.jpg&amp;d=identicon" class="headshot" /><dl><dt>Name:</dt><dd>Aaron Blohowiak</dd></dl><dl><dt>Github:</dt><dd><a href="https://github.com/aaronblohowiak">aaronblohowiak</a></dd></dl><dl><dt>Twitter:</dt><dd><a href="https://twitter.com/aaronblohowiak">aaronblohowiak</a></dd></dl><dl><dt>Location:</dt><dd>Palo Alto, CA</dd></dl></div><div class="aside"><h4>About this Article</h4><a href="http://twitter.com/share" data-count="horizontal" data-via="creationix" class="twitter-share-button">Tweet</a><script src="http://platform.twitter.com/widgets.js"></script><dl title="Tue May 18 2010 13:37:07 GMT-0500 (CDT)"><dt>Date Released:</dt><dd>Tuesday, May 18, 2010</dd></dl><dl><dt>Node Version:</dt><dd><a href="http://github.com/joyent/node/tree/v0.1.102">node v0.1.102</a></dd></dl><dl><dt>Code Samples:</dt><dd><ul><li><a href="creating-custom-modules/simplest-module-ever.js">simplest-module-ever.js</a></li><li><a href="creating-custom-modules/simplest-module-ever-test.js">simplest-module-ever-test.js</a></li><li><a href="creating-custom-modules/simplest-module-ever-complete.js">simplest-module-ever-complete.js</a></li><li><a href="creating-custom-modules/simplest-module-ever-complete-test.js">simplest-module-ever-complete-test.js</a></li></ul></dd></dl><dl><dt>Revisions:</dt><dd><ul></ul></dd></dl></div><div class="bubble"><h3>About HowToNode.org</h3>

<p>HowToNode.org is a community supported blog created by <a href="http://creationix.com/">Tim Caswell</a>. The purpose of the blog is to teach how to do various tasks in <a href="http://nodejs.org/">node.js</a> as well as teach fundamental concepts that are needed to write effective code.</p>

<p>This site is powered by <a href="http://github.com/creationix/wheat">Wheat</a>, a git based blogging engine written in <a href="http://nodejs.org/">node.JS</a>.</p>

<p>The content for this site is stored in a <a href="http://github.com/creationix/howtonode.org">git repository</a> that anyone can fork, write an article, and send a pull request. If your article passes the quality standards it will be published and help support the greater node community.</p></div></div><div id="footer"><p>&copy; 2011-2014 Tim Caswell under the MIT license.</p><p>Content and articles are copyrighted to the individual authors. Design by&nbsp;<a href="https://bengourley.co.uk/">Ben Gourley</a>. All code snippets used in the examples are in the public domain.</p><p>Wheat v2 running on node.js v16.4.2</p></div></div>
<script type="text/javascript">
//<![CDATA[
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
//]]>
</script>

<script type="text/javascript">
//<![CDATA[
try {
var pageTracker = _gat._getTracker("UA-12824411-1");
pageTracker._trackPageview();
} catch(err) {}
//]]>
</script>
</body>
<!-- Mirrored from localhost:8080/creating-custom-modules by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 13 Jul 2021 13:59:12 GMT -->
</html>