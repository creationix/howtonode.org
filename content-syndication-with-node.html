<!DOCTYPE html>
<html lang="en">
<!-- Mirrored from localhost:8080/content-syndication-with-node by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 13 Jul 2021 13:56:58 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta charset="utf-8" /><title>Content Syndication with Node.js - How To Node - NodeJS</title><meta name="description" content="Learn the zen of coding in NodeJS." /><meta name="viewport" content="width=device-width" /><link href="style.css" rel="stylesheet" /><link href="print.css" rel="stylesheet" media="print" /><link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="feed.xml" /><link href="favicon.ico" rel="icon" type="image/x-icon" /></head><body><div id="container"><div id="header"><a href="index.html"><img src="logo.png" alt="How to Node" class="logo" /><div class="tagline">The zen of coding in node.js</div></a></div><div id="main"><div class="article"><h1><a href="content-syndication-with-node.html">Content Syndication with Node.js</a></h1><p class="old-node-warning">HEADS UP! This article was written for an older version of node.&nbsp;More up-to-date information may be available elsewhere.</p><p>Web syndication is a must for any Website wishing to share some entries easily to other systems. Better known under their format name like <a href="http://en.wikipedia.org/wiki/RSS_(file_format">RSS</a>) or <a href="http://en.wikipedia.org/wiki/Atom_(standard">Atom</a>), they can be quite time consuming to generate without a module handling all their formating. Thanks to the power of Node's package manager <a href="https://npmjs.org/">NPM</a>, you can generate yours in no time.</p>

<h2>Installing the feed wrapper</h2>

<p>Before we start, head to your project folder and install the latest version of the module <a href="https://github.com/jpmonette/feed">feed</a>:</p>

<pre><code><span class="pln">$ npm install feed<br /></span></code></pre>

<h2>Building the feed</h2>

<p>First, we need to initialize a new <code>Feed</code> object. When you initialize the object, you must provide general information related to your Web syndication feed. </p>

<pre><code><span class="com">// Require module</span><span class="pln"><br /></span><span class="kwd">var</span><span class="pln"> </span><span class="typ">Feed</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'feed'</span><span class="pun">);</span><span class="pln"><br /><br /></span><span class="com">// Initializing feed object</span><span class="pln"><br /></span><span class="kwd">var</span><span class="pln"> feed </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Feed</span><span class="pun">({</span><span class="pln"><br />&nbsp; &nbsp; title</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="str">'My Feed Title'</span><span class="pun">,</span><span class="pln"><br />&nbsp; &nbsp; description</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp;</span><span class="str">'This is my personnal feed!'</span><span class="pun">,</span><span class="pln"><br />&nbsp; &nbsp; link</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="str">'http://example.com/'</span><span class="pun">,</span><span class="pln"><br />&nbsp; &nbsp; image</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="str">'http://example.com/logo.png'</span><span class="pun">,</span><span class="pln"><br />&nbsp; &nbsp; copyright</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp; &nbsp;</span><span class="str">'Copyright © 2013 John Doe. All rights reserved'</span><span class="pun">,</span><span class="pln"><br /><br />&nbsp; &nbsp; author</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; name</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp; &nbsp; </span><span class="str">'John Doe'</span><span class="pun">,</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; email</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp; &nbsp;</span><span class="str">'john.doe@example.com'</span><span class="pun">,</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; link</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp; &nbsp; </span><span class="str">'https://example.com/john-doe'</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br /></span><span class="pun">});</span><span class="pln"><br /></span></code></pre>

<p>Second, you might want to identify your feed thematic. Both <a href="http://en.wikipedia.org/wiki/RSS_(file_format">RSS</a>) and <a href="http://en.wikipedia.org/wiki/Atom_(standard">Atom</a>) formats offer the possibility to identify one or multiple categories. Again, this is super simple to add:</p>

<pre><code><span class="pln">feed</span><span class="pun">.</span><span class="pln">category</span><span class="pun">(</span><span class="str">'Node.js'</span><span class="pun">);</span><span class="pln"><br />feed</span><span class="pun">.</span><span class="pln">category</span><span class="pun">(</span><span class="str">'JavaScript'</span><span class="pun">);</span><span class="pln"><br /></span></code></pre>

<p>Third, every feed require at least one item (better known as an entry). To do so, you have to use the function <code>item</code> and provide the proper object. Of course, if you are running a content Website (like a blog!), chances are that you have multiple items. To populate your feed, use a <code>for</code> loop as followed:</p>

<pre><code><span class="kwd">for</span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> key </span><span class="kwd">in</span><span class="pln"> posts</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; feed</span><span class="pun">.</span><span class="pln">item</span><span class="pun">({</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; title</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;posts</span><span class="pun">[</span><span class="pln">key</span><span class="pun">].</span><span class="pln">title</span><span class="pun">,</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; link</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; posts</span><span class="pun">[</span><span class="pln">key</span><span class="pun">].</span><span class="pln">url</span><span class="pun">,</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; description</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp;posts</span><span class="pun">[</span><span class="pln">key</span><span class="pun">].</span><span class="pln">description</span><span class="pun">,</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; date</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; posts</span><span class="pun">[</span><span class="pln">key</span><span class="pun">].</span><span class="pln">date<br />&nbsp; &nbsp; </span><span class="pun">});</span><span class="pln"><br /></span><span class="pun">}</span><span class="pln"><br /></span></code></pre>

<p>At this point, everything is ready to generate your <a href="http://en.wikipedia.org/wiki/RSS_(file_format">RSS</a>) or Atom feed. Use the function <code>render</code>:</p>

<pre><code><span class="kwd">var</span><span class="pln"> output </span><span class="pun">=</span><span class="pln"> feed</span><span class="pun">.</span><span class="pln">render</span><span class="pun">();</span><span class="pln"><br /></span></code></pre>

<p>This is the implicit way of calling the <code>render</code> request. By default, it will render a <a href="http://en.wikipedia.org/wiki/RSS_(file_format">RSS</a>) feed. You an also use the explicit way, allowing you to select between <a href="http://en.wikipedia.org/wiki/RSS_(file_format">RSS</a>) or <a href="http://en.wikipedia.org/wiki/Atom_(standard">Atom</a>):</p>

<pre><code><span class="com">// Rendering a RSS 2.0 valid feed</span><span class="pln"><br />feed</span><span class="pun">.</span><span class="pln">render</span><span class="pun">(</span><span class="str">'rss-2.0'</span><span class="pun">);</span><span class="pln"><br /><br /></span><span class="com">// Rendering an Atom 1.0 valid feed</span><span class="pln"><br />feed</span><span class="pun">.</span><span class="pln">render</span><span class="pun">(</span><span class="str">'atom-1.0'</span><span class="pun">);</span><span class="pln"><br /></span></code></pre>

<p>Yes, it's that simple!</p>

<h2>Using with Express.js</h2>

<p>Using <code>feed</code> with <a href="http://expressjs.com/">Express.js</a> is super easy. Let's say you have an <code>app.get()</code> method routing the path <code>/rss</code>. To send your feed, render your feed like we mentionned previously. After, send the result by setting the proper <code>Content-Type</code> to <code>text/xml</code>:</p>

<pre><code><span class="pln">app</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'/rss'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">req</span><span class="pun">,</span><span class="pln"> res</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br /><br />&nbsp; &nbsp; </span><span class="com">// Initializing feed object</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">var</span><span class="pln"> feed </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Feed</span><span class="pun">({</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; title</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="str">'My Feed Title'</span><span class="pun">,</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; description</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp;</span><span class="str">'This is my personnal feed!'</span><span class="pun">,</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; link</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="str">'http://example.com/'</span><span class="pun">,</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; image</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="str">'http://example.com/logo.png'</span><span class="pun">,</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; copyright</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp; &nbsp;</span><span class="str">'Copyright © 2013 John Doe. All rights reserved'</span><span class="pun">,</span><span class="pln"><br /><br />&nbsp; &nbsp; &nbsp; &nbsp; author</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; name</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp; &nbsp; </span><span class="str">'John Doe'</span><span class="pun">,</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; email</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp; &nbsp;</span><span class="str">'john.doe@example.com'</span><span class="pun">,</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; link</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp; &nbsp; </span><span class="str">'https://example.com/john-doe'</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">});</span><span class="pln"><br /><br />&nbsp; &nbsp; </span><span class="com">// Function requesting the last 5 posts to a database. This is just an</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="com">// example, use the way you prefer to get your posts.</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="typ">Post</span><span class="pun">.</span><span class="pln">findPosts</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">(</span><span class="pln">posts</span><span class="pun">,</span><span class="pln"> err</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">err</span><span class="pun">)</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; res</span><span class="pun">.</span><span class="pln">send</span><span class="pun">(</span><span class="str">'404 Not found'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">404</span><span class="pun">);</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> key </span><span class="kwd">in</span><span class="pln"> posts</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; feed</span><span class="pun">.</span><span class="pln">item</span><span class="pun">({</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; title</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;posts</span><span class="pun">[</span><span class="pln">key</span><span class="pun">].</span><span class="pln">title</span><span class="pun">,</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; link</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; posts</span><span class="pun">[</span><span class="pln">key</span><span class="pun">].</span><span class="pln">url</span><span class="pun">,</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; description</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp;posts</span><span class="pun">[</span><span class="pln">key</span><span class="pun">].</span><span class="pln">description</span><span class="pun">,</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; date</span><span class="pun">:</span><span class="pln"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; posts</span><span class="pun">[</span><span class="pln">key</span><span class="pun">].</span><span class="pln">date<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">});</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">// Setting the appropriate Content-Type</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; res</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="str">'Content-Type'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'text/xml'</span><span class="pun">);</span><span class="pln"><br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">// Sending the feed as a response</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; res</span><span class="pun">.</span><span class="pln">send</span><span class="pun">(</span><span class="pln">feed</span><span class="pun">.</span><span class="pln">render</span><span class="pun">(</span><span class="str">'rss-2.0'</span><span class="pun">));</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">});</span><span class="pln"><br /></span><span class="pun">});</span><span class="pln"><br /></span></code></pre>

<h2>Conclusion</h2>

<p>There you go, it was super duper easy :)! Now, people can finally read your entries feeded from your Node.js application!</p><hr style="clear:both" /><div class="body" id="disqus_thread"></div>
<script type="text/javascript">
//<![CDATA[
var disqus_url = "http://howtonode.org/content-syndication-with-node";
//]]>
</script>
<script src="http://disqus.com/forums/howtonodeorg/embed.js" type="text/javascript"></script><a href="http://disqus.com/forums/howtonodeorg/?url=ref" class="view-thread">View the discussion thread.</a><a href="http://disqus.com/" class="dsq-brlink">blog comments powered by<span class="logo-disqus">Disqus</span></a>
<script type="text/javascript">
//<![CDATA[
(function() {
  var links = document.getElementsByTagName('a');
  var query = '?';
  for(var i = 0; i < links.length; i++) {
    if(links[i].href.indexOf('#disqus_thread') >= 0) {
      query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&amp;';
    }
  }
  document.write('<script charset="utf-8" type="text/javascript" src="//disqus.com/forums/howtonodeorg/get_num_replies.js' + query + '"></' + 'script>');
})();


//]]>
</script>
</div></div><div id="sidebar"><div class="aside author"><h4>About the Author</h4><img src="https://www.gravatar.com/avatar/5f2a66c6fff006a089d74217367c467a?r=pg&amp;s=200.jpg&amp;d=identicon" class="headshot" /><dl><dt>Name:</dt><dd>Jean-Philippe Monette</dd></dl><dl><dt>Github:</dt><dd><a href="https://github.com/jpmonette">jpmonette</a></dd></dl><dl><dt>Twitter:</dt><dd><a href="https://twitter.com/jpmonette">jpmonette</a></dd></dl><dl><dt>Links:</dt><dd><a href="http://blogue.jpmonette.net/">Homepage</a></dd></dl></div><div class="aside"><h4>About this Article</h4><a href="http://twitter.com/share" data-count="horizontal" data-via="creationix" class="twitter-share-button">Tweet</a><script src="http://platform.twitter.com/widgets.js"></script><dl title="Thu Feb 28 2013 23:30:00 GMT-0500 (EST)"><dt>Date Released:</dt><dd>Thursday, February 28, 2013</dd></dl><dl><dt>Node Version:</dt><dd><a href="http://github.com/joyent/node/tree/v0.8.15">node v0.8.15</a></dd></dl><dl><dt>Revisions:</dt><dd><ul></ul></dd></dl></div><div class="bubble"><h3>About HowToNode.org</h3>

<p>HowToNode.org is a community supported blog created by <a href="http://creationix.com/">Tim Caswell</a>. The purpose of the blog is to teach how to do various tasks in <a href="http://nodejs.org/">node.js</a> as well as teach fundamental concepts that are needed to write effective code.</p>

<p>This site is powered by <a href="http://github.com/creationix/wheat">Wheat</a>, a git based blogging engine written in <a href="http://nodejs.org/">node.JS</a>.</p>

<p>The content for this site is stored in a <a href="http://github.com/creationix/howtonode.org">git repository</a> that anyone can fork, write an article, and send a pull request. If your article passes the quality standards it will be published and help support the greater node community.</p></div></div><div id="footer"><p>&copy; 2011-2014 Tim Caswell under the MIT license.</p><p>Content and articles are copyrighted to the individual authors. Design by&nbsp;<a href="https://bengourley.co.uk/">Ben Gourley</a>. All code snippets used in the examples are in the public domain.</p><p>Wheat v2 running on node.js v16.4.2</p></div></div>
<script type="text/javascript">
//<![CDATA[
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
//]]>
</script>

<script type="text/javascript">
//<![CDATA[
try {
var pageTracker = _gat._getTracker("UA-12824411-1");
pageTracker._trackPageview();
} catch(err) {}
//]]>
</script>
</body>
<!-- Mirrored from localhost:8080/content-syndication-with-node by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 13 Jul 2021 13:56:58 GMT -->
</html>